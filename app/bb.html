<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Notification Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 40px;
            background: #f8f9fa;
            text-align: center;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        p {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        
        button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(33, 150, 243, 0.3);
        }
        
        button:hover {
            background: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 500;
        }
        
        .status.success {
            background: #e8f5e8;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }
        
        .status.warning {
            background: #fff3e0;
            color: #ef6c00;
            border: 1px solid #ff9800;
        }
        
        .status.error {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîî Simple Notification Demo</h1>
        <p>Based on <strong>Web Push Book</strong> best practices</p>
        
        <button id="notificationBtn">Show Notification</button>
        
        <div id="status" class="status" style="display: none;"></div>
    </div>

    <script>
        const notificationBtn = document.getElementById('notificationBtn');
        const statusDiv = document.getElementById('status');

        // Show status message
        function showStatus(message, type = 'success') {
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';
        }

        // Main function to handle notification
        async function showNotification() {
            // Check if notifications are supported
            if (!('Notification' in window)) {
                showStatus('‚ùå This browser does not support notifications', 'error');
                return;
            }

            // Check current permission
            if (Notification.permission === 'granted') {
                // Permission already granted, show notification
                displayNotification();
            } else if (Notification.permission === 'denied') {
                showStatus('‚ùå Notifications are blocked. Please enable them in your browser settings.', 'error');
            } else {
                // Request permission
                try {
                    const permission = await Notification.requestPermission();
                    
                    if (permission === 'granted') {
                        showStatus('‚úÖ Permission granted! Showing notification...', 'success');
                        displayNotification();
                    } else {
                        showStatus('‚ö†Ô∏è Permission denied. Cannot show notifications.', 'warning');
                    }
                } catch (error) {
                    console.error('Error requesting permission:', error);
                    showStatus('‚ùå Error requesting permission', 'error');
                }
            }
        }

        // Display the actual notification (Web Push Book style)
        function displayNotification() {
            const title = 'Simple Title';
            const options = {
                body: 'Simple piece of body text.\nSecond line of body text üëç',
                icon: 'data:image/svg+xml;base64,' + btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" width="192" height="192" viewBox="0 0 24 24" fill="none">
                        <rect width="24" height="24" fill="#2196F3" rx="4"/>
                        <path d="m9 12 2 2 4-4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                `),
                badge: 'data:image/svg+xml;base64,' + btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="10" fill="#2196F3"/>
                        <text x="12" y="16" text-anchor="middle" fill="white" font-size="12">!</text>
                    </svg>
                `),
                tag: 'simple-demo',
                timestamp: Date.now(),
                requireInteraction: false,
                silent: false
            };

            const notification = new Notification(title, options);

            // Handle notification events
            notification.onclick = () => {
                console.log('Notification clicked!');
                showStatus('üñ±Ô∏è Notification was clicked!', 'success');
                window.focus();
                notification.close();
            };

            notification.onshow = () => {
                console.log('Notification shown');
                showStatus('üì± Notification displayed successfully!', 'success');
            };

            notification.onerror = (error) => {
                console.error('Notification error:', error);
                showStatus('‚ùå Error displaying notification', 'error');
            };

            notification.onclose = () => {
                console.log('Notification closed');
            };
        }

        // Add click event listener
        notificationBtn.addEventListener('click', showNotification);

        // Check initial permission status
        window.addEventListener('load', () => {
            if (Notification.permission === 'granted') {
                showStatus('‚úÖ Notifications are already enabled. Click the button to test!', 'success');
            } else if (Notification.permission === 'denied') {
                showStatus('‚ùå Notifications are blocked. Please enable them in browser settings.', 'error');
            } else {
                showStatus('‚ö†Ô∏è Click the button to enable notifications and see the demo.', 'warning');
            }
        });
    </script>
</body>
</html>
